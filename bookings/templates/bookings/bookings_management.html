{% extends "base.html" %}

{% load crispy_forms_tags %}

{% block content %}

{% if user.is_superuser %}
  <div class="row">
    <div class="booking-page col-sx-12 col-md-6">
      <div class="text-center">
        <div>
          <h2>Manage Bookings</h2>
          <form class="form-inline float-right">
            <input class="form-control mr-sm-2" type="text" placeholder="Search by guest" name="search">
            <button class="btn my-2 my-sm-0" type="submit">Search</button>
          </form>
        </div>

        <div class="btn-group mr-2" role="group">
          <a href="?filter=all" class="btn">All</a>
          <a href="?filter=day" class="btn">Today</a>
          <a href="?filter=week" class="btn">This week</a>
        </div>

        {% if bookings %}
        <div class="table-responsive booking-list-scroller">
          <table class="table">
            <thead>
              <tr >
                <th>User name</th>
                <th>Size of party</th>
                <th>Table ID</th>
                <th>Start time</th>
                <th>Email</th>
                <th>Messages</th>
              </tr>
            </thead>
            <tbody>
              {% for booking in bookings %}
              <tr>
                <td><a href="{% url 'edit_booking' booking_id=booking.id %}">{{ booking.user.username }}</a></td>
                <td>{{ booking.size_of_party }}</td>
                <td>{{ booking.table.number }}</td>
                <td>{{ booking.start_time }}</td>
                <td>{{ booking.email }}</td>
                <td class="hover-message">
                  <p>see message</p>
                  <div class="hover-message-appear">
                    <p>
                      {{ booking.additional }}
                    </p>
                  </div>
                </td>
                <td><a href="{% url 'delete_booking' booking_id=booking.id %}" class="btn btn-primary">Cancel</a></td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
        {% else %}
        <p>No bookings found.</p>
        {% endif %}

      </div>
    </div> 
  </div>

  </div>
    <script>  
      // JavaScript code to update the value display element
      var slider = document.getElementById('id_size_of_party');
      var sliderValue = document.getElementById('slider_value');

      sliderValue.innerHTML = slider.value; // Initial value

      slider.oninput = function() {
      sliderValue.innerHTML = this.value;
      };
    </script>
{% else %}
    <script>
        window.location.href = "{% url 'home' %}";
    </script>
{% endif %}



{% endblock %}
